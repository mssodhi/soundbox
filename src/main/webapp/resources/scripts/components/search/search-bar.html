<div class="col-md-12 col-xs-12 pt0 pl0 pr0">
    <div class="search-bar col-md-5 col-xs-12 pl0 pr0">
        <p>Powered by <b>SoundCloud</b></p>
        <div class="form-group has-feedback">
            <input id="search" type="text" placeholder="Search" class="col-md-8 col-xs-12 form-control" ng-model="ctrl.q"
                   uib-typeahead="obj as obj.permalink for obj in ctrl.search($viewValue)"
                   typeahead-on-select="ctrl.selectFromTypeahead($item)"
                   typeahead-loading="loading"
                   typeahead-template-url="customTemplate.html">
            <i ng-if="loading" class="pt10 fa fa-spinner spin spinning form-control-feedback"></i>
        </div>
    </div>
</div>

<script type="text/ng-template" id="customTemplate.html">
    <a href ng-if="match.model.objectType === 'USER'">
        <img ng-src="{{match.model.user.pic_url}}" width="50" height="50">
        <span>{{match.model.user.username | limitTo: 40}} <span ng-if="match.model.user.username.length > 40">...</span></span>
        <i class="pull-right fa fa-user custom-green pt15"></i>
    </a>
    <a ng-if="match.model.objectType === 'SONG'">
        <img ng-src="{{match.model.song.artwork_url}}" width="50" height="50">
        <span>
            {{match.model.song.title | limitTo: 29}}
            <span ng-if="match.model.song.title.length > 29">...</span> -
            {{match.model.song.user.username | limitTo: 10}}
            <span ng-if="match.model.song.user.username.length > 10">...</span>
        </span>
        <i class="pull-right fa fa-music custom-orange pt15"></i>
    </a>
</script>